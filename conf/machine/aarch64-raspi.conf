#@TYPE: Machine
#@NAME: aarch64-raspi
#@DESCRIPTION: Raspberry Pi 4 (64-bit) board for StarryOS/ArceOS

require conf/machine/include/arm/armv8a/tune-cortexa72.inc

# ==================== ArceOS/StarryOS Configuration ====================
# Architecture and platform package
ARCEOS_ARCH = "aarch64"
ARCEOS_PLAT_PACKAGE = "axplat-aarch64-raspi"  # 不同！

# Rust target triple (bare-metal, no OS)
RUST_TARGET = "aarch64-unknown-none-softfloat"

# StarryOS is a bare-metal kernel, no libc needed
PREFERRED_PROVIDER_virtual/kernel = "starry"


# ==================== Raspberry Pi 4B Hardware ====================
# 注意：这些地址和 QEMU 不同！
# axplat-aarch64-raspi 的 axconfig.toml 会定义：
# - phys-memory-base = 0x0000_0000 (vs QEMU 的 0x4000_0000)
# - uart-paddr = 0xFE201000 (vs QEMU 的 0x0900_0000)
# - 其他外设地址也不同

KERNEL_IMAGETYPE = "bin"

# 真实硬件部署需要：
# 1. SD 卡启动配置 (config.txt, bootcode.bin)
# 2. 将 starry.bin 放到 SD 卡作为 kernel8.img
# 3. 或通过 JTAG 调试器烧录
